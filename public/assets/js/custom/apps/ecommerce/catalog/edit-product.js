"use strict";var KTAppEcommerceSaveProduct=function(){let e=()=>{$("#kt_ecommerce_add_product_options").repeater({initEmpty:!1,defaultValues:{"text-input":"foo"},show:function(){$(this).slideDown(),t()},hide:function(e){$(this).slideUp(e)}})},t=()=>{document.querySelectorAll('[data-kt-ecommerce-catalog-add-product="product_option"]').forEach(e=>{$(e).hasClass("select2-hidden-accessible")||$(e).select2({minimumResultsForSearch:-1})})};return{init:function(){var a,o;["#kt_ecommerce_add_product_description","#kt_ecommerce_add_product_meta_description"].forEach(e=>{let t=document.querySelector(e);if(t){t=new Quill(e,{modules:{    imageResize: {modules: [ 'Resize', 'DisplaySize', 'Toolbar' ]},toolbar:[[{header:[1,2,3,4,!1]}],["bold","italic","underline","paragraph"],["image","code-block"]]},placeholder:"متن خود را اینجا تایپ کنید...",theme:"snow"});let a=document.querySelector(e).getAttribute("data-value");console.log("e is:"),console.log(document.querySelector(e).getAttribute("data-value")),t.root.innerHTML=a}}),["#kt_ecommerce_add_product_category","#kt_ecommerce_add_product_tags"].forEach(e=>{let t=document.querySelector(e);t&&new Tagify(t,{whitelist:["new","trending","sale","discounted","selling fast","last 10"],dropdown:{maxItems:20,classname:"tagify__inline__suggestions",enabled:0,closeOnSelect:!1}})}),a=document.querySelector("#kt_ecommerce_add_product_discount_slider"),o=document.querySelector("#kt_ecommerce_add_product_discount_label"),noUiSlider.create(a,{start:[10],connect:!0,range:{min:1,max:100}}),a.noUiSlider.on("update",function(e,t){o.innerHTML=Math.round(e[t]),t&&(o.innerHTML=Math.round(e[t]))}),e(),new Dropzone("#kt_ecommerce_add_product_media",{url:"https://keenthemes.com/scripts/void.php",paramName:"file",maxFiles:10,maxFilesize:10,addRemoveLinks:!0,accept:function(e,t){"wow.jpg"==e.name?t("نها، تو اینطور نیست."):t()}}),t(),(()=>{let e=document.getElementById("kt_ecommerce_add_product_status"),t=document.getElementById("kt_ecommerce_add_product_status_select"),a=["bg-success","bg-warning","bg-danger"];$(t).on("change",function(t){switch(t.target.value){case"published":e.classList.remove(...a),e.classList.add("bg-success"),s();break;case"scheduled":e.classList.remove(...a),e.classList.add("bg-warning"),d();break;case"inactive":e.classList.remove(...a),e.classList.add("bg-danger"),s();break;case"draft":e.classList.remove(...a),e.classList.add("bg-primary"),s()}});let o=document.getElementById("kt_ecommerce_add_product_status_datepicker");$("#kt_ecommerce_add_product_status_datepicker").flatpickr({enableTime:!0,dateFormat:"Y-m-d H:i"});let d=()=>{o.parentNode.classList.remove("d-none")},s=()=>{o.parentNode.classList.add("d-none")}})(),(()=>{let e=document.querySelectorAll('[name="method"][type="radio"]'),t=document.querySelector('[data-kt-ecommerce-catalog-add-category="auto-options"]');e.forEach(e=>{e.addEventListener("change",e=>{"1"===e.target.value?t.classList.remove("d-none"):t.classList.add("d-none")})})})(),(()=>{let e=document.querySelectorAll('input[name="discount_option"]'),t=document.getElementById("kt_ecommerce_add_product_discount_percentage"),a=document.getElementById("kt_ecommerce_add_product_discount_fixed");e.forEach(e=>{e.addEventListener("change",e=>{switch(e.target.value){case"2":t.classList.remove("d-none"),a.classList.add("d-none");break;case"3":t.classList.add("d-none"),a.classList.remove("d-none");break;default:t.classList.add("d-none"),a.classList.add("d-none")}})})})(),(()=>{let e=document.getElementById("kt_ecommerce_add_product_shipping_checkbox"),t=document.getElementById("kt_ecommerce_add_product_shipping");e.addEventListener("change",e=>{e.target.checked?t.classList.remove("d-none"):t.classList.add("d-none")})})(),(()=>{let e,t=document.getElementById("kt_ecommerce_add_product_form"),a=document.getElementById("kt_ecommerce_add_product_submit");e=FormValidation.formValidation(t,{fields:{product_name:{validators:{notEmpty:{message:"نام محصول الزامی است"}}},sku:{validators:{notEmpty:{message:"بارکد محصول مورد نیاز است"}}},shelf:{validators:{notEmpty:{message:"مقدار قفسه مورد نیاز است"}}},price:{validators:{notEmpty:{message:"قیمت پایه محصول الزامی است"}}},tax:{validators:{notEmpty:{message:"طبقه مالیات محصول مورد نیاز است"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),a.addEventListener("click",o=>{o.preventDefault(),e&&e.validate().then(function(e){console.log("validated!"),"Valid"==e?(a.setAttribute("data-kt-indicator","on"),a.disabled=!0,setTimeout(function(){a.removeAttribute("data-kt-indicator"),Swal.fire({text:"فرم با موفقیت ارسال شد!",icon:"success",buttonsStyling:!1,confirmButtonText:"باشه فهمیدم!",customClass:{confirmButton:"btn btn-primary"}}).then(function(e){e.isConfirmed&&(a.disabled=!1,window.location=t.getAttribute("data-kt-redirect"))})},2e3)):Swal.fire({html:"متأسفیم ، به نظر می رسد برخی خطاها شناسایی شده است ، لطفاً دوباره امتحان کنید. <br/><br/>لطفا توجه داشته باشید که ممکن است خطاهایی در <strong>عمومی</strong> یا <strong>پیشرفته</strong> tabs",icon:"error",buttonsStyling:!1,confirmButtonText:"باشه فهمیدم!",customClass:{confirmButton:"btn btn-primary"}})})})})()}}}();KTUtil.onDOMContentLoaded(function(){KTAppEcommerceSaveProduct.init()});